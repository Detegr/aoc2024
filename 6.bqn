gâ€¿w â† {ğ•©âŠ¸=Â¨"^#"}>â€¢FLines"6.in"
og  â† g
d   â† Â«â€¿(Â»âŒ¾â‰)â€¿Â»â€¿(Â«âŒ¾â‰) # directions
od  â† d
M   â† {ğ•ğ•©}            # move
C   â† {+Â´+Ë2=ğ•¨+ğ•©}     # collision
E   â† {0=+Â´+Ëğ•©}       # end (guard out of frame)
stp â† âŸ¨âŸ©              # steps
S   â† {wğ•Šğ•©:           # step
  ng â† (âŠ‘d)M g
  { w C ng ? d 1âŠ¸âŒ½â†© â‹„ g ; stpâˆ¾âŸœ(â‹ˆg)â†© â‹„ gâ†©ng }
}
 wâŠ¸Sâ€¢_while_(Â¬E) g

star1 â† â‰ â·stp

# hilariously slow brute force
# would need to convert the whole solution to
# use coordinates instead of visually nice arrays
# if I would be interested in any kind of perf
ob    â† â¥Š{1âŒ¾(ğ•©âŠ¸âŠ‘) (â‰¢g)â¥Š0}Â¨â†•|â‰¢g # all possible obstructions
loops â† 0
{ğ•Š:
  stp â†© âŸ¨âŸ©
  g   â†© og
  d   â†© od
  (Ã—(ğ•©âŠ‘ob)+w)âŠ¸Sâ€¢_while_{((â‰ stp)<Ã—Â´â‰¢g) âˆ§ Â¬Eğ•©} g
  loops +â†© (â‰ stp)â‰¥Ã—Â´â‰¢g
  ğ•©+1
}â€¢_while_{ğ•©<â‰ ob} 0

star2 â† loops
